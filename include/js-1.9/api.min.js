function compileAPIResponseMessage(e){var s="",a=!0,r="text-green-avocado";if(200!=e.response_code&&(a=!1,r="text-red-cardinal"),e.message)s=e.message;else{for(var o=e.failed_data,t=0;t<o.length;t++)s.length>0&&(s+="<br>"),s+=o[t].message;var n=e.success_data;for(t=0;t<n.length;t++)s.length>0&&(s+="<br>"),s+=n[t].message}var c={};return c.code=e.response_code,c.message=s,c.color=r,c.success=a,c}function importData(e,s,a,r){if(a[r]){var o=a[r].index,t=a[r].row;$.ajax({url:"/tools/import/"+s,method:"POST",async:!1,data:{data:e[o]},success:function(n){n=JSON.parse(n);$response=compileAPIResponseMessage(n),t.find(".response-code").addClass($response.color).html($response.code),t.find(".desc").addClass($response.color).html($response.message);var c=$("[relgroup="+o+"]");$response.success?$(".import-result-success").append(c):$(".import-result-failed").append(c),importData(e,s,a,++r)}})}}function startImportData(e,s,a){var r=new Array;e.each(function(){r.push({index:$(this).attr("relkey"),row:$(this)})}),importData(s,a,r,0)}